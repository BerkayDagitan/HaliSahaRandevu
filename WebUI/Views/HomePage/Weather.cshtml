@{
    var weatherData = ViewBag.WeatherData as Dictionary<string, List<EntityLayer.DTOs.WeatherInfoDTO>>;
}

<div class="container mt-4">
    <h2 class="mb-4 text-center">İstanbul, Ankara, İzmir Hava Durumu (Bugün + 2 Gün)</h2>
    @if (ViewBag.WeatherError != null)
    {
        <div class="alert alert-danger text-center">@ViewBag.WeatherError</div>
    }
    <div class="row">
        @if (weatherData != null)
        {
            foreach (var city in weatherData.Keys)
            {
                <div class="col-md-4 mb-4">
                    <div class="card shadow">
                        <div class="card-header text-center fw-bold">@city</div>
                        <div class="card-body">
                            @foreach (var forecast in weatherData[city])
                            {
                                <div class="d-flex align-items-center mb-3">
                                    <img src="@($"https://openweathermap.org/img/wn/{forecast.Icon}@2x.png")" width="48" alt="icon" />
                                    <div class="ms-3">
                                        <div><b>@DateTime.Parse(forecast.Date).ToString("dd.MM.yyyy")</b></div>
                                        <div>@forecast.Temp&nbsp;°C, @forecast.Description</div>
                                    </div>
                                </div>
                            }
                        </div>
                    </div>
                </div>
            }
        }
        else
        {
            <div class="col-12">
                <div class="alert alert-warning text-center">
                    Hava durumu verisi alınamadı.
                </div>
            </div>
        }
    </div>
</div>

<style>
    .card-header {
        background: #007bff;
        color: white;
        font-size: 1.2rem;
        letter-spacing: 1px;
    }
    .card {
        border-radius: 12px;
        box-shadow: 0 4px 16px rgba(0,0,0,0.08);
    }
    .card-body {
        background: #f8f9fa;
        border-radius: 0 0 12px 12px;
    }
</style> 